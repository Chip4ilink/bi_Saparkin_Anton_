(()=>{"use strict";var e={130:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExchangeRateListExtender=void 0;const n=a(913),r=a(305),i={merge:{hideCopy:!0,hideMerge:!0},form:!1,inline:{readonly:!0}};t.ExchangeRateListExtender=class{static init(e){if(e.getObject().getCode()!=n.DbSchema.ExchangeRate)return;e.setExtOptions(i);const t=()=>e.getSelectedRows().length>0;e.addCommand({title:()=>t()?n.Translation.UpdateRate:n.Translation.AddRate,code:"er-edit-command",icon:()=>t()?"refresh":"plus",execute(){const a=e.getSelectedRows(),n=t()?a[0].$id:null;!function(e,t){const a=r.FormService.create(e.getObject().getCode(),t,{hideSubtitle:!0});a.onClose((()=>e.refresh())),a.onLayoutCreated((()=>r.Ui.showSidebar(a)))}(e,n)},type:"extended",enabled:()=>e.getSelectedRows().length<=1,description:()=>e.getSelectedRows().length>1?n.Translation.OverSelect:null}),e.addTransformerForCell((e=>{const t=e.col.code;if("DateEnd"!=t)return;const a=e.record[t];null!=a&&a.valueOf()!=n.systemDateEnd.valueOf()||e.setContent([m("div","âˆž")])}))}}},305:function(e,t,a){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.registerModule=t.legacy=t.modules=t.App=t.Schema=t.UiComponents=t.ModuleRegistry=t.RecordManager=t.CommandManager=t.Page=t.Auth=t.Filter=t.m=t.Api=t.Ui=t.Utils=t.mUtils=t.FieldControl=t.ControlManager=t.Form=t.FormService=t.List=t.ListService=t.SecurityManager=t.Navigation=t.MDT=void 0;var r=n(a(523));t.MDT=window.MDT,t.Navigation=t.MDT.Navigation,t.SecurityManager=t.MDT.SecurityManager,t.ListService=t.MDT.ListService,t.List=t.MDT.List,t.FormService=t.MDT.FormService,t.Form=t.MDT.Form,t.ControlManager=t.MDT.ControlManager,t.FieldControl=t.MDT.FieldControl,t.mUtils=t.MDT.mUtils,t.Utils=t.MDT.Utils,t.Ui=t.MDT.Ui,t.Api=t.MDT.Api,t.m=t.MDT.m,t.Filter=t.MDT.Filter,t.Auth=t.MDT.Auth,t.Page=t.MDT.Page,t.CommandManager=t.MDT.CommandManager,t.RecordManager=t.MDT.RecordManager,t.ModuleRegistry=t.MDT.ModuleRegistry,t.UiComponents=t.MDT.UiComponents,t.Schema=t.MDT.Schema,t.App=t.MDT.App,t.modules=t.MDT.modules,t.legacy=t.MDT.legacy,t.registerModule=function(e,a){t.MDT.registerModule(e,{version:r.default.version,name:null==a?void 0:a.name})}},523:e=>{e.exports=JSON.parse('{"name":"mdt-client","version":"31.0.13","description":"","main":"dist/index.js","types":"dist/index.d.ts","files":["/dist","/types"],"scripts":{"build":"tsc","types-update":"tsc --project tsconfig.facade-types.json","update":"tsc --project tsconfig.facade-types.json && tsc","pub-patch":"npm version patch && npm publish","pub-minor":"npm version minor && npm publish"},"repository":{"type":"git","url":"git@gitlab.ics-it.ru:mdtc/mdt-facade.git"},"author":"","license":"ISC","devDependencies":{"typescript":"^4.8.4"},"dependencies":{"@types/mithril":"^0.0.27"}}')},564:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0;const n=a(305),r=a(913);t.Commands=class{static init(){n.CommandManager.addGroup({code:"ExchangeRate",title:r.Translation.ExchangeRate,icon:"money-bill-transfer"}).addCommands([{title:r.Translation.AddRate,code:r.Translation.AddRate,icon:"money-bill-transfer",execute(){const e=n.FormService.create(r.DbSchema.ExchangeRate,0);n.Ui.showSidebar(e)}}])}}},632:(e,t,a)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExchangeRateFormExtender=void 0;const n=a(913);t.ExchangeRateFormExtender=class{static init(e){if(e.getObject().getCode()!=n.DbSchema.ExchangeRate)return;const t=e.isNewRecord();e.getFormCtrl().options.primaryButton={title:t?n.Translation.AddRate:n.Translation.UpdateRate,icon:t?"add":"refresh"},e.setFieldOptions({Unit:{actions:[{text:()=>e.valueByPath("ID_Currency/Code"),title:()=>e.valueByPath("ID_Currency/Name")}],showClearAction:!1},Price:{actions:[{text:()=>e.valueByPath("ID_CurrencyExchange/Code"),title:()=>e.valueByPath("ID_CurrencyExchange/Name")}],showClearAction:!1},ID_Currency:{formatRecord:"{Name} ({Code})"},ID_CurrencyExchange:{formatRecord:"{Name} ({Code})"}})}}},913:(e,t)=>{var a;Object.defineProperty(t,"__esModule",{value:!0}),t.systemDateEnd=t.DbSchema=t.Translation=void 0,(a=t.Translation||(t.Translation={})).ExchangeRate="er:ExchangeRate",a.UpdateRate="er:UpdateRate",a.AddRate="er:AddRate",a.OverSelect="er:OverSelect",(t.DbSchema||(t.DbSchema={})).ExchangeRate="er.ExchangeRate",t.systemDateEnd=new Date(3e3,0,1)}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}(()=>{const e=a(305),t=a(564),n=a(130),r=a(632);e.ListService.onCreate((e=>{n.ExchangeRateListExtender.init(e)})),e.FormService.onInit((e=>{r.ExchangeRateFormExtender.init(e)})),t.Commands.init(),(0,e.registerModule)((()=>{}),{name:"exchange-rate"})})()})();
//# sourceMappingURL=index.js.map