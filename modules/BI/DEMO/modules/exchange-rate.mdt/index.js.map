{"version":3,"file":"index.js","mappings":"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","sources":["webpack://exchange-rate/./src/ExchangeRateListExtender.ts","webpack://exchange-rate/./node_modules/mdt-client/dist/index.js","webpack://exchange-rate/./src/Commands.ts","webpack://exchange-rate/./src/ExchangeRateFormExtender.ts","webpack://exchange-rate/./src/Constants.ts","webpack://exchange-rate/webpack/bootstrap","webpack://exchange-rate/./src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExchangeRateListExtender = void 0;\nconst Constants_1 = require(\"Constants\");\nconst mdt_client_1 = require(\"mdt-client\");\nconst listOptions = {\n    merge: {\n        hideCopy: true,\n        hideMerge: true\n    },\n    form: false,\n    inline: {\n        readonly: true\n    }\n};\nfunction showForm(list, id) {\n    const form = mdt_client_1.FormService.create(list.getObject().getCode(), id, { hideSubtitle: true });\n    form.onClose(() => list.refresh());\n    form.onLayoutCreated(() => mdt_client_1.Ui.showSidebar(form));\n}\nclass ExchangeRateListExtender {\n    static init(list) {\n        var objCode = list.getObject().getCode();\n        if (objCode != Constants_1.DbSchema.ExchangeRate)\n            return;\n        list.setExtOptions(listOptions);\n        const haveSelection = () => list.getSelectedRows().length > 0;\n        list.addCommand({\n            title: () => haveSelection() ? Constants_1.Translation.UpdateRate : Constants_1.Translation.AddRate,\n            code: \"er-edit-command\",\n            icon: () => haveSelection() ? \"refresh\" : \"plus\",\n            execute() {\n                const selectedRows = list.getSelectedRows();\n                const id = haveSelection() ? selectedRows[0].$id : null;\n                showForm(list, id);\n            },\n            type: \"extended\",\n            enabled: () => list.getSelectedRows().length <= 1,\n            description: () => list.getSelectedRows().length > 1 ? Constants_1.Translation.OverSelect : null\n        });\n        list.addTransformerForCell((cell) => {\n            const cellCode = cell.col.code;\n            if (cellCode != \"DateEnd\")\n                return;\n            const dateEnd = cell.record[cellCode];\n            if (dateEnd == null || dateEnd.valueOf() == Constants_1.systemDateEnd.valueOf()) {\n                cell.setContent([m(\"div\", \"\\u221E\")]);\n            }\n        });\n    }\n}\nexports.ExchangeRateListExtender = ExchangeRateListExtender;\n","\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.registerModule = exports.legacy = exports.modules = exports.App = exports.Schema = exports.UiComponents = exports.ModuleRegistry = exports.RecordManager = exports.CommandManager = exports.Page = exports.Auth = exports.Filter = exports.m = exports.Api = exports.Ui = exports.Utils = exports.mUtils = exports.FieldControl = exports.ControlManager = exports.Form = exports.FormService = exports.List = exports.ListService = exports.SecurityManager = exports.Navigation = exports.MDT = void 0;\r\nvar package_json_1 = __importDefault(require(\"../package.json\"));\r\nexports.MDT = window.MDT;\r\nexports.Navigation = exports.MDT.Navigation, exports.SecurityManager = exports.MDT.SecurityManager, exports.ListService = exports.MDT.ListService, exports.List = exports.MDT.List, exports.FormService = exports.MDT.FormService, exports.Form = exports.MDT.Form, exports.ControlManager = exports.MDT.ControlManager, exports.FieldControl = exports.MDT.FieldControl, exports.mUtils = exports.MDT.mUtils, exports.Utils = exports.MDT.Utils, exports.Ui = exports.MDT.Ui, exports.Api = exports.MDT.Api, exports.m = exports.MDT.m, exports.Filter = exports.MDT.Filter, exports.Auth = exports.MDT.Auth, exports.Page = exports.MDT.Page, exports.CommandManager = exports.MDT.CommandManager, exports.RecordManager = exports.MDT.RecordManager, exports.ModuleRegistry = exports.MDT.ModuleRegistry, exports.UiComponents = exports.MDT.UiComponents, exports.Schema = exports.MDT.Schema, exports.App = exports.MDT.App, exports.modules = exports.MDT.modules, exports.legacy = exports.MDT.legacy;\r\nfunction registerModule(callback, context) {\r\n    exports.MDT.registerModule(callback, {\r\n        version: package_json_1.default.version,\r\n        name: context === null || context === void 0 ? void 0 : context.name\r\n    });\r\n}\r\nexports.registerModule = registerModule;\r\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Commands = void 0;\nconst mdt_client_1 = require(\"mdt-client\");\nconst Constants_1 = require(\"./Constants\");\nclass Commands {\n    static init() {\n        const commandGroup = mdt_client_1.CommandManager.addGroup({\n            code: \"ExchangeRate\",\n            title: Constants_1.Translation.ExchangeRate,\n            icon: \"money-bill-transfer\"\n        });\n        function GetAddPriceCommand() {\n            return {\n                title: Constants_1.Translation.AddRate,\n                code: Constants_1.Translation.AddRate,\n                icon: \"money-bill-transfer\",\n                execute() {\n                    const form = mdt_client_1.FormService.create(Constants_1.DbSchema.ExchangeRate, 0);\n                    mdt_client_1.Ui.showSidebar(form);\n                }\n            };\n        }\n        commandGroup.addCommands([\n            GetAddPriceCommand()\n        ]);\n    }\n}\nexports.Commands = Commands;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExchangeRateFormExtender = void 0;\nconst Constants_1 = require(\"Constants\");\nclass ExchangeRateFormExtender {\n    static init(form) {\n        const objCode = form.getObject().getCode();\n        if (objCode != Constants_1.DbSchema.ExchangeRate)\n            return;\n        const isNew = form.isNewRecord();\n        form.getFormCtrl().options.primaryButton = {\n            title: isNew ? Constants_1.Translation.AddRate : Constants_1.Translation.UpdateRate,\n            icon: isNew ? \"add\" : \"refresh\",\n        };\n        form.setFieldOptions({\n            Unit: {\n                actions: [{\n                        text: () => form.valueByPath(\"ID_Currency/Code\"),\n                        title: () => form.valueByPath(\"ID_Currency/Name\")\n                    }],\n                showClearAction: false\n            },\n            Price: {\n                actions: [{\n                        text: () => form.valueByPath(\"ID_CurrencyExchange/Code\"),\n                        title: () => form.valueByPath(\"ID_CurrencyExchange/Name\")\n                    }],\n                showClearAction: false\n            },\n            ID_Currency: {\n                formatRecord: \"{Name} ({Code})\"\n            },\n            ID_CurrencyExchange: {\n                formatRecord: \"{Name} ({Code})\"\n            }\n        });\n    }\n}\nexports.ExchangeRateFormExtender = ExchangeRateFormExtender;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.systemDateEnd = exports.DbSchema = exports.Translation = void 0;\nvar Translation;\n(function (Translation) {\n    Translation[\"ExchangeRate\"] = \"er:ExchangeRate\";\n    Translation[\"UpdateRate\"] = \"er:UpdateRate\";\n    Translation[\"AddRate\"] = \"er:AddRate\";\n    Translation[\"OverSelect\"] = \"er:OverSelect\";\n})(Translation = exports.Translation || (exports.Translation = {}));\nvar DbSchema;\n(function (DbSchema) {\n    DbSchema[\"ExchangeRate\"] = \"er.ExchangeRate\";\n})(DbSchema = exports.DbSchema || (exports.DbSchema = {}));\nexports.systemDateEnd = new Date(3000, 0, 1);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mdt_client_1 = require(\"mdt-client\");\nconst Commands_1 = require(\"Commands\");\nconst ExchangeRateListExtender_1 = require(\"ExchangeRateListExtender\");\nconst ExchangeRateFormExtender_1 = require(\"ExchangeRateFormExtender\");\nmdt_client_1.ListService.onCreate((list) => {\n    ExchangeRateListExtender_1.ExchangeRateListExtender.init(list);\n});\nmdt_client_1.FormService.onInit((form) => {\n    ExchangeRateFormExtender_1.ExchangeRateFormExtender.init(form);\n});\nCommands_1.Commands.init();\n(0, mdt_client_1.registerModule)(() => { }, { name: \"exchange-rate\" });\n"],"names":["Object","defineProperty","exports","value","ExchangeRateListExtender","Constants_1","mdt_client_1","listOptions","merge","hideCopy","hideMerge","form","inline","readonly","init","list","getObject","getCode","DbSchema","ExchangeRate","setExtOptions","haveSelection","getSelectedRows","length","addCommand","title","Translation","UpdateRate","AddRate","code","icon","execute","selectedRows","id","$id","FormService","create","hideSubtitle","onClose","refresh","onLayoutCreated","Ui","showSidebar","showForm","type","enabled","description","OverSelect","addTransformerForCell","cell","cellCode","col","dateEnd","record","valueOf","systemDateEnd","setContent","m","__importDefault","this","mod","__esModule","registerModule","legacy","modules","App","Schema","UiComponents","ModuleRegistry","RecordManager","CommandManager","Page","Auth","Filter","Api","Utils","mUtils","FieldControl","ControlManager","Form","List","ListService","SecurityManager","Navigation","MDT","package_json_1","window","callback","context","version","default","name","Commands","addGroup","addCommands","ExchangeRateFormExtender","isNew","isNewRecord","getFormCtrl","options","primaryButton","setFieldOptions","Unit","actions","text","valueByPath","showClearAction","Price","ID_Currency","formatRecord","ID_CurrencyExchange","Date","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call","Commands_1","ExchangeRateListExtender_1","ExchangeRateFormExtender_1","onCreate","onInit"],"sourceRoot":""}